#### Table of Contents

- [Project](#project)
- [Description](#description)
- [Created By:](#created-by)
- [Notes](#notes)
- [Setting up the app](#setting-up-the-app)
- [Running app](#running-app)
- [Models](#models)
- [API Routes](#api-routes)
- [Web Routes](#web-routes)
- [Issues/ToDo](#issuestodo)

## Project

[MERN Stack Tutorial](https://www.youtube.com/playlist?list=PL4cUxeGkcC9iJ_KkrkBZWZRHVwnzLIoUE) and [MERN Auth Tutorial](https://www.youtube.com/playlist?list=PL4cUxeGkcC9g8OhpOZxNdhXggFz2lOuCT) from [Net Ninja](https://www.youtube.com/c/TheNetNinja) hosted on Google Cloud Compute Engine and available to view at [workoutapp.jondunlap.com](https://workoutapp.jondunlap.com)

**Note:** _Server is currently paused, please contact me if you want to view a demo of the application_

## Description

A simple MERN application that allows a user to add and remove workouts, with authentication and routes for individual users to create their own workouts. The backend makes use of Mongoose to talk to the MongoDB database as well as to authenticate that all data being passed to the controllers is valid, if it is not valid, an error will be presented to the user as well as using CSS to highlight the required fields. On the frontend it makes use of React useContext to interact with the API depending on the context that is passed to the reducer and carrying out the necessary request and then updating the state.

## Created By:

**Name**: Jonathan Dunlap

**Email**: [jon@jondunlap.com](mailto:jon@jondunlap.com)

**Portfolio Website**: [jondunlap.com](https://jondunlap.com)

**Resume**: [https://standardresume.co/r/jondunlap](https://standardresume.co/r/jondunlap)

## Notes

- The application follows the tutorial listed above, however, I added code necessary to host it online using a server hosted on Google Cloud platform so that I could also practice deploying a MERN application. The application can be previewed at [workoutapp.jondunlap.com](https://workoutapp.jondunlap.com).
- To deploy the application on the server, I was able to follow most of the steps from [Brad Traversy's](https://www.youtube.com/c/TraversyMedia) tutorial [Linux Server Setup & MERN Deployment](https://www.youtube.com/watch?v=7aRjGIhwyQM), however, I used a Google Cloud VM instance which presented several issues not covered in Brad's tutorial. I then used Google Domains to add it as a subdomain of my current website by updating the DNS records to point at the servers IP address. I also used an SSL certificate and attached it to this server so that all traffic could be sent using HTTPS.

## Setting up the app

- `cd` into each of the subdirectories and run `npm install` to add the necessary packages
- Inside of the `server` folder, create a `.env` file and add variables for `PORT` and `MONGODB_URI` with values for your preferred port and a connection string to either a local MongoDB database or a MongoDB Cloud Atlas database.

## Running app

- From root folder - `npm run dev` - This will make use of concurrently and start the API server, connecting to the database, as well as starting the React frontend

## Models

|           Name | Type         | Required             |
| -------------: | ------------ | -------------------- |
|                | **USERS**    |                      |
|       **\_id** | ObjectID     | true (autogenerated) |
|      **email** | String       | true                 |
|   **password** | String       | true                 |
|                | **WORKOUTS** |                      |
|       **\_id** | ObjectID     | true (autogenerated) |
|      **title** | String       | true                 |
|       **load** | Number       | true                 |
|       **reps** | Number       | true                 |
|    **user_id** | String       | true                 |
| **timestamps** | DateTime     | true (autogenerated) |

## API Routes

|     Method | Path              | Description                    |
| ---------: | ----------------- | ------------------------------ |
|            | **USERS**         |                                |
|   **POST** | /api/user/login   | Login the user                 |
|   **POST** | /api/user/signup  | Register a user                |
|            | **WORKOUTS**      |                                |
|   **POST** | /api/workouts     | Creates a new workout document |
|    **GET** | /api/workouts     | Gets all the workout documents |
|    **GET** | /api/workouts/:id | Get a single workout document  |
| **DELETE** | /api/workouts/:id | Delete a single workout        |
|  **PATCH** | /api/workouts/:id | Update a single workout        |

## Web Routes

|  Method | Path       | Description                    |
| ------: | ---------- | ------------------------------ |
|         | **Public** |                                |
| **GET** | /          | Landing page, list of workouts |
| **GET** | /login     | Page for logging in a user     |
| **GET** | /signup    | Page for signing up a user     |

## Issues/ToDo

- Tutorial used each subdirectory to install packages and dependencies which makes it a bit more difficult to setup and start the application. Next time I will make sure to use the root directory to run `npm init` so that I can add packages and startup scripts to the root directory allowing the developer/user an easier way of starting the application.
- The tutorial was not meant to be deployed which caused some issues that I had to overcome when I finally decided to follow Brad's tutorial for deploying a MERN application to a Linux server. I had to add some additional code on the backend API so that it could serve the React frontend as well as adding code so that the .env file could be properly read by Node.
- Since I decided to use Google Cloud instead of Linode for my Linux server there were some additional issues that I had to overcome that were not covered in the MERN deployment tutorial I linked earlier. Some of the issues were easy to find and overcome, needing to set a static IP address so I can add a domain, but others required a bit more research, the version of Ubuntu that Google Cloud defaulted to does not support the latest version of Node.js which caused me to have to remove the node repo that I added and then to install an earlier version of Node.js. But I feel like this was a good experience and allowed me to learn more about Google's cloud platform which seems to be more robust than Linode even though there seems to be more complexity in some areas.
- Following several guides and troubleshooting some issues, I was able to install a certificate on my server and setup https traffic using nginx. I had several SSL certificates available through Namecheap and I was able to activate and install them on my server so that all traffic could be secured using https. This is my first time actually setting this up and, although there were some issues to overcome, I was able to get it up and running properly.
